from datetime import datetime, timedelta
import json

a =[0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.464400000000000,
   0.499989473684211,
   0.535578947368421,
   0.571168421052631,
   0.636063157894737,
   0.713778947368421,
   0.791494736842105,
   0.869210526315790,
   0.903000000000000,
   0.903000000000000,
   0.903000000000000,
   0.903000000000000,
   0.903000000000000,
   0.903000000000000,
   0.903000000000000,
   0.903000000000000,
   0.879347368421052,
   0.801631578947368,
   0.723915789473684,
   0.646200000000000,
   0.575810526315789,
   0.540221052631579,
   0.504631578947368,
   0.469042105263158,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000,
   0.435000000000000]

Ωt = list()
Δt = 15/60

t = datetime.strptime('00:00', "%H:%M")
while t < datetime.strptime('23:59', "%H:%M"):
    Ωt.append(t.strftime("%H:%M"))
    t += timedelta(hours=Δt)

cost = {}
for i in range(len(Ωt)):
    cost[Ωt[i]] = a[i]

print(json.dumps(cost, indent=4))
# save json
with open('data/cost.json', 'w') as file:
    json.dump(cost, file, indent=4)

    for s in Ωs:
    plt.figure()
    plt.plot(Ωt, [data['PV']['Pmax'] * fs[s]['pv'][t] for t in Ωt], label='PV', color='orange')
    plt.plot(Ωt, [data['load']['Pmax'] * fs[s]['load'][t] for t in Ωt], label='Load', color='black', marker='o', linestyle='dashed')
    plt.ylabel('Power [kW]')
    plt.xlabel('Timestamp')
    plt.xticks(Ωt[::int(len(Ωt)/6)])  # Set x-axis ticks at every 4th element of Ωt
    plt.legend()
    plt.savefig(f'Results/scenarios/Scenarios_{s}.png', dpi=300, bbox_inches='tight')
    plt.close('All')